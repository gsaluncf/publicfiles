<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What Pub/Sub Gave Us</title>
</head>

<body>

    <div
        style="background-color: #dbeafe; border: 1px solid #93c5fd; border-radius: 8px; padding: 20px; margin: 20px 0;">
        <h2 style="color: #1e40af; border-left: 4px solid #3b82f6; padding-left: 15px; margin-top: 10px;">What Pub/Sub
            Gave Us</h2>
        <p style="color: #1e293b; font-size: 16px; line-height: 1.6;">Before we move to peer-to-peer, let us be clear
            about what we already have. Pub/Sub solved real problems. Understanding those solutions will help us see
            exactly where they break down.</p>
    </div>

    <hr style="border: 1px solid #cbd5e1; margin: 30px 0;">

    <h2 style="color: #1e40af; border-left: 4px solid #3b82f6; padding-left: 15px; margin-top: 30px;">The Three Problems
        Pub/Sub Solves</h2>

    <h3 style="color: #1d4ed8; margin-top: 25px;">1. Decoupling: Publishers and Subscribers Do Not Know Each Other</h3>
    <p style="color: #1e293b; font-size: 15px; line-height: 1.6;">In a direct messaging system, Service A must know the
        address of Service B, Service C, and every other service that cares about its events. Adding a new consumer
        means changing the producer. That does not scale.</p>
    <p style="color: #1e293b; font-size: 15px; line-height: 1.6;">Pub/Sub introduces a <strong
            style="color: #1e40af;">broker</strong> (like AWS SNS) that sits between publishers and subscribers. The
        publisher sends events to a topic. The broker delivers them to whoever subscribed. Neither side needs to know
        the other exists.</p>

    <div style="text-align: center; margin: 20px 0;">
        <svg viewBox="0 0 700 200" style="max-width: 680px; width: 100%; height: auto; font-family: Arial, sans-serif;">
            <rect x="30" y="70" width="130" height="50" rx="8" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" />
            <text x="95" y="100" text-anchor="middle" fill="#1e40af" font-size="14" font-weight="bold">Publisher</text>
            <rect x="270" y="50" width="160" height="80" rx="10" fill="#1e40af" stroke="#1e3a8a" stroke-width="2" />
            <text x="350" y="85" text-anchor="middle" fill="#ffffff" font-size="14" font-weight="bold">SNS Topic</text>
            <text x="350" y="105" text-anchor="middle" fill="#93c5fd" font-size="11">(broker)</text>
            <rect x="540" y="20" width="130" height="40" rx="8" fill="#eff6ff" stroke="#60a5fa" stroke-width="2" />
            <text x="605" y="46" text-anchor="middle" fill="#1e40af" font-size="12">Subscriber A</text>
            <rect x="540" y="75" width="130" height="40" rx="8" fill="#eff6ff" stroke="#60a5fa" stroke-width="2" />
            <text x="605" y="101" text-anchor="middle" fill="#1e40af" font-size="12">Subscriber B</text>
            <rect x="540" y="130" width="130" height="40" rx="8" fill="#eff6ff" stroke="#60a5fa" stroke-width="2" />
            <text x="605" y="156" text-anchor="middle" fill="#1e40af" font-size="12">Subscriber C</text>
            <defs>
                <marker id="arrow1" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
                </marker>
            </defs>
            <line x1="160" y1="95" x2="265" y2="90" stroke="#64748b" stroke-width="2" marker-end="url(#arrow1)" />
            <line x1="430" y1="75" x2="535" y2="42" stroke="#64748b" stroke-width="2" marker-end="url(#arrow1)" />
            <line x1="430" y1="90" x2="535" y2="92" stroke="#64748b" stroke-width="2" marker-end="url(#arrow1)" />
            <line x1="430" y1="105" x2="535" y2="148" stroke="#64748b" stroke-width="2" marker-end="url(#arrow1)" />
            <text x="350" y="180" text-anchor="middle" fill="#94a3b8" font-size="12" font-style="italic">Publisher never
                knows who receives its events.</text>
        </svg>
    </div>

    <h3 style="color: #1d4ed8; margin-top: 25px;">2. Fan-Out: One Event, Many Consumers</h3>
    <p style="color: #1e293b; font-size: 15px; line-height: 1.6;">When a new ad view happens on a host site, multiple
        services care: the billing service, the analytics dashboard, the fraud detector, the advertiser's reporting
        feed. Pub/Sub delivers the same event to all of them simultaneously. No polling. No coordination between
        consumers.</p>

    <h3 style="color: #1d4ed8; margin-top: 25px;">3. Asynchronous Processing: No Blocking</h3>
    <p style="color: #1e293b; font-size: 15px; line-height: 1.6;">The publisher fires an event and moves on immediately.
        It does not wait for every subscriber to process the event. If a subscriber is slow or temporarily down, the
        message waits in its queue (SQS) until the subscriber is ready. This prevents one slow component from blocking
        the entire system.</p>

    <hr style="border: 1px solid #cbd5e1; margin: 30px 0;">

    <h2 style="color: #1e40af; border-left: 4px solid #3b82f6; padding-left: 15px; margin-top: 30px;">What We Built in
        Track 1</h2>

    <table style="width: 100%; border-collapse: collapse; margin: 20px 0; border: 1px solid #cbd5e1;">
        <thead>
            <tr style="background-color: #f1f5f9;">
                <th style="padding: 12px; text-align: left; border: 1px solid #cbd5e1; color: #1e40af;">Component</th>
                <th style="padding: 12px; text-align: left; border: 1px solid #cbd5e1; color: #1e40af;">What It Does
                </th>
                <th style="padding: 12px; text-align: left; border: 1px solid #cbd5e1; color: #1e40af;">AWS Service</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;"><strong>Topic</strong></td>
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;">Central event channel for view
                    reports</td>
                <td
                    style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b; font-family: monospace; font-size: 13px;">
                    SNS FIFO</td>
            </tr>
            <tr style="background-color: #f8fafc;">
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;"><strong>Queue per
                        subscriber</strong></td>
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;">Reliable delivery with retry</td>
                <td
                    style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b; font-family: monospace; font-size: 13px;">
                    SQS FIFO</td>
            </tr>
            <tr>
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;"><strong>Subscription</strong></td>
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;">Connects queues to topic</td>
                <td
                    style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b; font-family: monospace; font-size: 13px;">
                    SNS Subscription</td>
            </tr>
            <tr style="background-color: #f8fafc;">
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;"><strong>Message format</strong>
                </td>
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;">JSON with event type, sender,
                    content</td>
                <td style="padding: 12px; border: 1px solid #cbd5e1; color: #1e293b;">Custom protocol</td>
            </tr>
        </tbody>
    </table>

    <div
        style="background-color: #d1fae5; border: 1px solid #10b981; border-radius: 8px; padding: 15px; margin: 20px 0;">
        <h4 style="color: #059669; margin-top: 5px;">What Worked Well</h4>
        <p style="color: #1e293b; font-size: 15px; line-height: 1.6;">Pub/Sub gave us clean separation of concerns,
            reliable delivery (messages do not get lost), and the ability to add new consumers without touching existing
            code. For a system where one central authority publishes events, this is exactly right.</p>
    </div>

    <hr style="border: 1px solid #cbd5e1; margin: 30px 0;">

    <h2 style="color: #1e40af; border-left: 4px solid #3b82f6; padding-left: 15px; margin-top: 30px;">The Assumptions
        Pub/Sub Makes</h2>

    <p style="color: #1e293b; font-size: 15px; line-height: 1.6;">Every architecture makes assumptions. Pub/Sub assumes:
    </p>

    <ol style="color: #1e293b; font-size: 15px; line-height: 1.8;">
        <li><strong style="color: #1e40af;">Someone runs the broker.</strong> SNS is an AWS service. Someone pays for
            it, operates it, and trusts it to deliver messages correctly.</li>
        <li><strong style="color: #1e40af;">The broker is always available.</strong> If SNS goes down, no events flow.
            Every publisher and subscriber depends on it.</li>
        <li><strong style="color: #1e40af;">The broker is honest.</strong> You trust that SNS delivers messages without
            altering them, dropping them selectively, or reordering them maliciously.</li>
        <li><strong style="color: #1e40af;">Subscribers trust publishers.</strong> If a publisher says "150 views,"
            everyone accepts that number. There is no verification.</li>
    </ol>

    <div
        style="background-color: #eff6ff; border: 1px solid #60a5fa; border-radius: 8px; padding: 15px; margin: 20px 0;">
        <h3 style="color: #1d4ed8; margin-top: 5px;">Think About</h3>
        <ul style="color: #1e293b; font-size: 15px; line-height: 1.8;">
            <li>In our 2032 world where centralized identity brokers are outlawed, who would run the SNS equivalent?
            </li>
            <li>If a host site reports inflated ad view counts, who in the current pub/sub architecture would catch
                them?</li>
        </ul>
    </div>

    <hr style="border: 1px solid #cbd5e1; margin: 30px 0;">

    <div style="display: flex; justify-content: space-between; margin: 20px 0; padding: 10px 0;">
        <a href="https://ncfdatascience.com/distributedforcs2026/week4/p2p-project.html"
            style="color: #64748b; text-decoration: none; font-size: 14px;">Back to Project Overview</a>
        <a href="https://ncfdatascience.com/distributedforcs2026/week4/p2p-01-breaks.html"
            style="color: #1e40af; text-decoration: none; font-size: 14px; font-weight: bold;">Next: Where Pub/Sub
            Breaks for 2032</a>
    </div>

</body>

</html>