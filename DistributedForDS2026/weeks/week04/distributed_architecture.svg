<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="700" xmlns="http://www.w3.org/2000/svg">
        <!-- Title -->
        <text x="600" y="35" font-size="26" font-weight="bold" text-anchor="middle" font-family="Arial">
            Architecture of Distributed Compute
        </text>
        
        <!-- Client -->
        <g transform="translate(100, 100)">
            <rect x="0" y="0" width="120" height="80" fill="#3498DB" stroke="#333" stroke-width="2" rx="5"/>
            <text x="60" y="35" font-size="16" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial">Client</text>
            <text x="60" y="55" font-size="12" text-anchor="middle" fill="white" font-family="Arial">(Browser/App)</text>
        </g>
        
        <!-- Arrow from Client to Router -->
        <line x1="220" y1="140" x2="340" y2="140" stroke="#333" stroke-width="3" marker-end="url(#arrow)"/>
        <text x="280" y="130" font-size="13" text-anchor="middle" font-family="Arial" fill="#555">HTTP Request</text>
        
        <!-- Request Router (API Gateway) -->
        <g transform="translate(340, 100)">
            <rect x="0" y="0" width="160" height="80" fill="#E74C3C" stroke="#333" stroke-width="2" rx="5"/>
            <text x="80" y="30" font-size="16" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial">Request Router</text>
            <text x="80" y="50" font-size="12" text-anchor="middle" fill="white" font-family="Arial">(Load Balancer)</text>
            <text x="80" y="68" font-size="11" text-anchor="middle" fill="white" font-family="Arial" font-style="italic">e.g., API Gateway</text>
        </g>
        
        <!-- Arrow from Router to Workers -->
        <line x1="500" y1="140" x2="620" y2="140" stroke="#333" stroke-width="3" marker-end="url(#arrow)"/>
        <text x="560" y="130" font-size="13" text-anchor="middle" font-family="Arial" fill="#555">Route to Worker</text>
        
        <!-- Worker Pool (Lambda Functions) -->
        <g transform="translate(620, 80)">
            <rect x="0" y="0" width="240" height="120" fill="#9B59B6" stroke="#333" stroke-width="2" rx="5"/>
            <text x="120" y="25" font-size="16" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial">Worker Pool</text>
            <text x="120" y="45" font-size="12" text-anchor="middle" fill="white" font-family="Arial">(Compute)</text>
            <text x="120" y="63" font-size="11" text-anchor="middle" fill="white" font-family="Arial" font-style="italic">e.g., Lambda, EC2, Containers</text>
            
            <!-- Mini workers -->
            <rect x="20" y="75" width="50" height="30" fill="#8E44AD" stroke="#fff" stroke-width="1.5" rx="3"/>
            <text x="45" y="95" font-size="10" text-anchor="middle" fill="white" font-family="Arial">Worker 1</text>
            
            <rect x="80" y="75" width="50" height="30" fill="#8E44AD" stroke="#fff" stroke-width="1.5" rx="3"/>
            <text x="105" y="95" font-size="10" text-anchor="middle" fill="white" font-family="Arial">Worker 2</text>
            
            <rect x="140" y="75" width="50" height="30" fill="#8E44AD" stroke="#fff" stroke-width="1.5" rx="3"/>
            <text x="165" y="95" font-size="10" text-anchor="middle" fill="white" font-family="Arial">Worker 3</text>
            
            <text x="210" y="95" font-size="14" text-anchor="middle" fill="white" font-family="Arial">...</text>
        </g>
        
        <!-- Arrow from Workers to State Store -->
        <line x1="740" y1="200" x2="740" y2="280" stroke="#333" stroke-width="3" marker-end="url(#arrow)"/>
        <text x="770" y="240" font-size="13" font-family="Arial" fill="#555">Read/Write</text>
        
        <!-- Shared State Store (Database) -->
        <g transform="translate(620, 280)">
            <rect x="0" y="0" width="240" height="100" fill="#27AE60" stroke="#333" stroke-width="2" rx="5"/>
            <text x="120" y="30" font-size="16" font-weight="bold" text-anchor="middle" fill="white" font-family="Arial">Shared State Store</text>
            <text x="120" y="50" font-size="12" text-anchor="middle" fill="white" font-family="Arial">(Database)</text>
            <text x="120" y="68" font-size="11" text-anchor="middle" fill="white" font-family="Arial" font-style="italic">e.g., DynamoDB, PostgreSQL</text>
            <text x="120" y="86" font-size="10" text-anchor="middle" fill="white" font-family="Arial">üóÑÔ∏è Persistent Storage</text>
        </g>
        
        <!-- Key questions boxes -->
        <g transform="translate(100, 400)">
            <rect x="0" y="0" width="1000" height="250" fill="#ECF0F1" stroke="#7F8C8D" stroke-width="2" rx="5"/>
            <text x="500" y="30" font-size="18" font-weight="bold" text-anchor="middle" font-family="Arial">Key Design Questions</text>
            
            <!-- Question 1 -->
            <g transform="translate(20, 50)">
                <circle cx="0" cy="0" r="5" fill="#E74C3C"/>
                <text x="15" y="5" font-size="14" font-weight="bold" font-family="Arial">Request Router:</text>
                <text x="15" y="25" font-size="12" font-family="Arial">‚Ä¢ How does it know which workers are available?</text>
                <text x="15" y="42" font-size="12" font-family="Arial">‚Ä¢ What happens if a worker crashes mid-request?</text>
                <text x="15" y="59" font-size="12" font-family="Arial">‚Ä¢ How do we prevent one client from overwhelming the system?</text>
            </g>
            
            <!-- Question 2 -->
            <g transform="translate(20, 125)">
                <circle cx="0" cy="0" r="5" fill="#9B59B6"/>
                <text x="15" y="5" font-size="14" font-weight="bold" font-family="Arial">Worker Pool:</text>
                <text x="15" y="25" font-size="12" font-family="Arial">‚Ä¢ Static provisioning (always N workers) or dynamic (spin up on-demand)?</text>
                <text x="15" y="42" font-size="12" font-family="Arial">‚Ä¢ Trade-off: Predictable latency vs. pay-per-use efficiency</text>
                <text x="15" y="59" font-size="12" font-family="Arial">‚Ä¢ Lambda model: Dynamic provisioning with cold start penalty</text>
            </g>
            
            <!-- Question 3 -->
            <g transform="translate(500, 50)">
                <circle cx="0" cy="0" r="5" fill="#27AE60"/>
                <text x="15" y="5" font-size="14" font-weight="bold" font-family="Arial">Shared State Store:</text>
                <text x="15" y="25" font-size="12" font-family="Arial">‚Ä¢ Why separate from compute? Workers are ephemeral!</text>
                <text x="15" y="42" font-size="12" font-family="Arial">‚Ä¢ Network latency cost: Every DB access = roundtrip</text>
                <text x="15" y="59" font-size="12" font-family="Arial">‚Ä¢ Consistency model: Strong (slow) vs. Eventual (fast)</text>
            </g>
            
            <!-- Bottom insight -->
            <g transform="translate(500, 180)">
                <text x="0" y="0" font-size="13" font-weight="bold" text-anchor="middle" font-family="Arial" fill="#E67E22">‚ö° Critical Insight:</text>
                <text x="0" y="20" font-size="12" text-anchor="middle" font-family="Arial">Workers can fail, scale up/down independently. Storage needs different guarantees.</text>
                <text x="0" y="37" font-size="12" text-anchor="middle" font-family="Arial">This is why we separate compute from state in distributed systems.</text>
            </g>
        </g>
        
        <!-- Arrow marker -->
        <defs>
            <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                <polygon points="0 0, 10 3, 0 6" fill="#333"/>
            </marker>
        </defs>
    </svg>